pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- animation montgolfieres
-- hommage au c64

function c64_texts()
	print("** commodore 64 basic v2 **", 10, 7, 12)
	print("64k ram 38911 basic bytes free", 5, 17, 12)
	print("ready.", 5, 27, 12)
end

function c64_borders()
	--c64 borders
	rectfill(0,0,127,2,12)
	rectfill(0,125,127,127,12)
	rectfill(0,0,2,127,12)
	rectfill(125,0,127,127,12)
end

function _init()
	balloons = {
		{sp=1, x=58, y=58, dx=1, dy=1},
	}
	scrw = 128 -- screen width
	scrh = 128 -- screen height
	spw = 15 -- sprite width
	sph = 21 -- sprite height
end

function add_balloon()
	b = {}
	b.sp = rnd({1,3,5,7,9})
	b.x = rnd(scrw-spw)
	b.y = rnd(scrh-sph)
	b.dx = 0
	b.dy = 0
	while (b.dx == 0 and b.dy == 0) do
		b.dx = rnd({-1, 0, 1})
		b.dy = rnd({-1, 0, 1})
	end	
	add(balloons, b)
end

function _update()
	if (btnp(❎)) then
		add_balloon()
	end
	for i,v in ipairs(balloons) do
		v.x += v.dx
		if (v.x >= scrw) then v.x -= scrw end
		if (v.x < 0) then v.x += scrw end
		v.y += v.dy
		if (v.y >= scrh) then v.y -= scrh end
		if (v.y < 0) then v.y += scrh end
	end
end

function _draw()
	cls(1)
	c64_texts()
	for i,v in ipairs(balloons) do
		spr(v.sp, v.x, v.y, 2, 3)
		wx = v.x
		wy = v.y
		if (v.x > (scrw-spw)) then
			wx -= scrw
		end
		if (v.y > (scrh-sph)) then
			wy -= scrh
		end
		if (wx != v.x or wy != v.y) then
			spr(v.sp, wx, wy, 2, 3)
		end
	end
	if (#balloons > 1) then
		print(#balloons, 5, 118, 12)
	end
	c64_borders()
end
__gfx__
0000000000007777777000000000eeeeeee000000000aaaaaaa0000000009999999000000000bbbbbbb000000000000000000000000000000000000000000000
00000000007777777777700000eeeeeeeeeee00000aaaaaaaaaaa000009999999999900000bbbbbbbbbbb0000000000000000000000000000000000000000000
0070070007777777777777000eeeeeeeeeeeee000aaaaaaaaaaaaa0009999999999999000bbbbbbbbbbbbb000000000000000000000000000000000000000000
00077000077777cc777777000eeeeecceeeeee000aaaaaccaaaaaa00099999cc999999000bbbbbccbbbbbb000000000000000000000000000000000000000000
0007700077777c77cc777770eeeeeceecceeeee0aaaaacaaccaaaaa099999c99cc999990bbbbbcbbccbbbbb00000000000000000000000000000000000000000
0070070077777c7777777770eeeeeceeeeeeeee0aaaaacaaaaaaaaa099999c9999999990bbbbbcbbbbbbbbb00000000000000000000000000000000000000000
0000000077777c7788777770eeeeecee88eeeee0aaaaacaa88aaaaa099999c9988999990bbbbbcbb88bbbbb00000000000000000000000000000000000000000
00000000077777cc777777000eeeeecceeeeee000aaaaaccaaaaaa00099999cc999999000bbbbbccbbbbbb000000000000000000000000000000000000000000
0000000007777777777777000eeeeeeeeeeeee000aaaaaaaaaaaaa0009999999999999000bbbbbbbbbbbbb000000000000000000000000000000000000000000
0000000007777777777777000eeeeeeeeeeeee000aaaaaaaaaaaaa0009999999999999000bbbbbbbbbbbbb000000000000000000000000000000000000000000
0000000007077777777707000e0eeeeeeeee0e000a0aaaaaaaaa0a0009099999999909000b0bbbbbbbbb0b000000000000000000000000000000000000000000
00000000007077777770700000e0eeeeeee0e00000a0aaaaaaa0a000009099999990900000b0bbbbbbb0b0000000000000000000000000000000000000000000
00000000007007777700700000e00eeeee00e00000a00aaaaa00a000009009999900900000b00bbbbb00b0000000000000000000000000000000000000000000
000000000007007770070000000e00eee00e0000000a00aaa00a00000009009990090000000b00bbb00b00000000000000000000000000000000000000000000
000000000007007770070000000e00eee00e0000000a00aaa00a00000009009990090000000b00bbb00b00000000000000000000000000000000000000000000
0000000000007007007000000000e00e00e000000000a00a00a0000000009009009000000000b00b00b000000000000000000000000000000000000000000000
0000000000007007007000000000e00e00e000000000a00a00a0000000009009009000000000b00b00b000000000000000000000000000000000000000000000
00000000000007777700000000000eeeee00000000000aaaaa000000000009999900000000000bbbbb0000000000000000000000000000000000000000000000
00000000000007777700000000000eeeee00000000000aaaaa000000000009999900000000000bbbbb0000000000000000000000000000000000000000000000
00000000000007777700000000000eeeee00000000000aaaaa000000000009999900000000000bbbbb0000000000000000000000000000000000000000000000
000000000000007770000000000000eee0000000000000aaa00000000000009990000000000000bbb00000000000000000000000000000000000000000000000
