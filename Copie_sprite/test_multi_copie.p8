pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- test copie de sprite 
-- et changement de couleur

function copyspr(spsrc, spdst, spw, sph, srccolor, dstcolor)
	-- 16 sprites per line
	srcx = (spsrc % 16) * 8
	srcy = (spsrc \ 16) * 8
	dstx = (spdst % 16) * 8
	dsty = (spdst \ 16) * 8
	for y = srcy, srcy+(sph*8)-1 do
		for x = srcx, srcx+(spw*8)-1 do
			c = sget(x, y)
			if (srccolor != nil and dstcolor != nil and c == srccolor) then c = dstcolor end
			sset(x + (dstx-srcx), y + (dsty-srcy), c)
		end
	end
end

function _init()
	spnmax = 0
	copyspr(0, 2, 2, 3, 7, 6)
	copyspr(0, 4, 2, 3, 7, 9)
	copyspr(0, 6, 2, 3, 7, 11)
	copyspr(0, 8, 2, 3, 7, 13)
	copyspr(0, 10, 2, 3, 7, 2)
	copyspr(0, 12, 2, 3, 7, 14)
	copyspr(0, 14, 2, 3, 7, 15)
end

function _update()
	t = (time()*100)%5
	if (t == 0 and spnmax < 14) then 
		spnmax += 2
	end
end

function _draw()
	cls()
	spx = 5
	spy = 5
	for spn = 0, spnmax, 2 do
		spx += 11
		spy += 11
		spr(spn, spx, spy, 2, 3)
	end
end
__gfx__
00007777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
077777cc777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77cc7777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77887777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
077777cc777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07077777777707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700777770070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070077700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070077700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
