pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- copie de sprite 
-- et changement de couleur

function copyspr(spsrc, spdst, spw, sph, srccolor, dstcolor)
	-- 16 sprites per line
	srcx = (spsrc % 16) * 8
	srcy = (spsrc \ 16) * 8
	dstx = (spdst % 16) * 8
	dsty = (spdst \ 16) * 8

	for y = srcy, srcy+(sph*8)-1 do
		for x = srcx, srcx+(spw*8)-1 do
			c = sget(x, y)
			if (srccolor != nil and dstcolor != nil and c == srccolor) then c = dstcolor end
			sset(x + (dstx-srcx), y + (dsty-srcy), c)
		end
	end
end

function _draw()
	cls()

	print("src :",5,5,7);
	spr(0, 10, 15, 2, 3)

	copyspr(0, 2, 2, 3, 7, 10)
	print("dst :",5,60,7);
	spr(2, 10, 70, 2, 3)
end
__gfx__
00007777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
077777cc777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77cc7777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777c77887777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
077777cc777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07077777777707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700777770070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070077700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070077700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
