pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- 3d_iso_ordre_affichage_alt
-- par francois crevola

function _init()
	frame = -1
end

function _update()
	if (btnp(❎)) then frame+=1 end
end

function _draw()
	cls()
	if (frame == -1) then
		print("press ❎", 5*8, 6*8, 3)
	elseif (frame<=9) then 
		draw1()
	else
		draw2()
	end
end

function draw1()
	local n = 0
--	if (frame==1) then n = 1 end
--	if (frame==2) then n = 3 end
--	if (frame==3) then n = 6 end
--	if (frame==4) then n = 9 end
--	if (frame==5) then n = 9 end
	level(6,4,frame,true)
end

function draw2()
	local dx, dy
	dx = 10
	dy = 1.5

	-- les 3 plans
	if (frame>=11) then
		level(6,6,9,false)
		print("1", dx*8 + 7, (dy+6)*8 + 2, 3)
	end

	if (frame>=12) then
		level(6,4,9,false)
		print("2", dx*8 + 7, (dy+4)*8 + 2, 3)
	end

	if (frame>=13) then
		level(6,2,9,false)
		print("3", dx*8 + 7, (dy+2)*8 + 2, 3)
	end
			
end

-->8
function draw_block(sp, dx, dy, rang, col)
	local x = dx-(rang-1)+(col-1)*2
	local y = dy+(rang-1)/2
 spr(sp, x*8, y*8, 2, 2)
end

function level(dx, dy, maxi, withtext)
	-- 1
	if (maxi>=1) then
		spr(1, dx*8, dy*8, 2, 2)
		if (withtext) then
			print("1", dx*8 + 7, dy*8 + 2, 3)
		end
	end

	-- 2	
	if (maxi>=4) then
		spr(1, (dx-1)*8, (dy+.5)*8, 2, 2)
		if (withtext) then	
			print("4", (dx-1)*8 + 7, (dy+.5)*8 + 2, 3)	
		end
	end

	-- 3
	if (maxi>=2) then
		spr(1, (dx+1)*8, (dy+.5)*8, 2, 2)
		if (withtext) then	
			print("2", (dx+1)*8 + 7, (dy+.5)*8 + 2, 3)	
		end
	end

	-- 4
	if (maxi>=7) then
		spr(1, (dx-2)*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("7", (dx-2)*8 + 7, (dy+1)*8 + 2, 3)
		end
	end		
	
	-- 5
	if (maxi>=5) then
		spr(1, dx*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("5", dx*8 + 7, (dy+1)*8 + 2, 3)
		end
	end
	
	-- 6
	if (maxi>=3) then
		spr(1, (dx+2)*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("3", (dx+2)*8 + 7, (dy+1)*8 + 2, 3)
		end
	end					
	
	-- 7
	if (maxi>=8) then
		spr(1, (dx-1)*8, (dy+1.5)*8, 2, 2)
		if (withtext) then	
			print("8", (dx-1)*8 + 7, (dy+1.5)*8 + 2, 3)	
		end
	end	
	
	-- 8
	if (maxi>=6) then
		spr(1, (dx+1)*8, (dy+1.5)*8, 2, 2)
		if (withtext) then	
			print("6", (dx+1)*8 + 7, (dy+1.5)*8 + 2, 3)	
		end
	end
	
 -- 9
	if (maxi>=9) then
		spr(1, dx*8, (dy+2)*8, 2, 2)
		if (withtext) then	
			print("9", dx*8 + 7, (dy+2)*8 + 2, 3)
		end
	end			

end
__gfx__
00000000000000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000566666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070055566666666666dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555556666666dddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555555666dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000555555dddddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000005555dddd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000055dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
