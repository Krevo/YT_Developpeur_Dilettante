pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- 3d_iso_draw_from_table_v1
-- par francois crevola

function _init()
	wmap = {
		{
			{0,1,0 },
			{ 1,1,0},
			{1,0,1},
			{ 1,1,0},
			{0,1,0},
		},
		{
			{0,1,0 },
			{ 0,0,0},
			{1,0,1},
			{ 0,0,0},
			{0,1,0},
		},
		{
			{0,1,0 },
			{ 1,1,0},
			{1,0,1},
			{ 1,1,0},
			{0,1,0},
		},
	}
end

function _update()
end

function _draw()
 cls()
	draw_from_table()
end

function draw_from_table()
	local startx = 4;
	local starty = 4;
	local h = 2
	for h = 1, #wmap do
		for y,v in ipairs(wmap[h]) do
			for x,w in ipairs(wmap[h][y]) do
				if (wmap[h][y][x] != 0) do
			 	draw_block(wmap[h][y][x], startx, starty, x, y)
				end
			end
		end
		starty = starty - 1
	end
end

function draw_block(sp, sx, sy, x, y)
	local x = sx+(1-y%2)+(x-1)*2
	local y = sy+(y-1)/2
 spr(sp, x*8, y*8, 2, 2)
end

-->8

function level(dx, dy, maxi, withtext)
	-- 1
	if (maxi>=1) then
		spr(1, dx*8, dy*8, 2, 2)
		if (withtext) then
			print("1", dx*8 + 7, dy*8 + 2, 3)
		end
	end

	-- 2	
	if (maxi>=2) then
		spr(1, (dx-1)*8, (dy+.5)*8, 2, 2)
		if (withtext) then	
			print("2", (dx-1)*8 + 7, (dy+.5)*8 + 2, 3)	
		end
	end

	-- 3
	if (maxi>=3) then
		spr(1, (dx+1)*8, (dy+.5)*8, 2, 2)
		if (withtext) then	
			print("3", (dx+1)*8 + 7, (dy+.5)*8 + 2, 3)	
		end
	end

	-- 4
	if (maxi>=4) then
		spr(1, (dx-2)*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("4", (dx-2)*8 + 7, (dy+1)*8 + 2, 3)
		end
	end		
	
	-- 5
	if (maxi>=5) then
		spr(1, dx*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("5", dx*8 + 7, (dy+1)*8 + 2, 3)
		end
	end
	
	-- 6
	if (maxi>=6) then
		spr(1, (dx+2)*8, (dy+1)*8, 2, 2)
		if (withtext) then	
			print("6", (dx+2)*8 + 7, (dy+1)*8 + 2, 3)
		end
	end					
	
	-- 7
	if (maxi>=7) then
		spr(1, (dx-1)*8, (dy+1.5)*8, 2, 2)
		if (withtext) then	
			print("7", (dx-1)*8 + 7, (dy+1.5)*8 + 2, 3)	
		end
	end	
	
	-- 8
	if (maxi>=8) then
		spr(1, (dx+1)*8, (dy+1.5)*8, 2, 2)
		if (withtext) then	
			print("8", (dx+1)*8 + 7, (dy+1.5)*8 + 2, 3)	
		end
	end
	
 -- 9
	if (maxi>=9) then
		spr(1, dx*8, (dy+2)*8, 2, 2)
		if (withtext) then	
			print("9", dx*8 + 7, (dy+2)*8 + 2, 3)
		end
	end			

end
__gfx__
00000000000000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000566666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070055566666666666dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555556666666dddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555555666dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000055555555dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000555555dddddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000005555dddd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000055dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
